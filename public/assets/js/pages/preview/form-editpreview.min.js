$(function() {
    $('#parishioner_edit_form').on('submit', function(e) {
        e.preventDefault();
        selform = $(this);
        show_previewURL = selform.data('prehref');
        if (selform.parsley().isValid()) {
            //console.log($('.form-group .form-control').serializeArray());
            pre_except_data = $('#parishioner_edit_form select[multiple="multiple"]').serializeArray();
            pre_inputdata = $('#parishioner_edit_form input').serializeArray();
            pre_textdata = $("#parishioner_edit_form textarea").serializeArray();
            pre_select_data = new Array();
            pre_inputchoose_data = new Array();
            pre_imgdata = new Array();

            //  user_img=$('input[name="user_image"]');
            //  if(user_img.get(0).files && user_img.get(0).files[0]){
            //      var reader = new FileReader();
            //      pre_imgdata.push({name : user_img.attr('name') , value: user_img.get(0).files[0] });
            //      }
            //      console.log(pre_imgdata);
            //pre_imgdata=$('input[name="user_image"]').get(0).files;
            $('#parishioner_edit_form select:not([multiple="multiple"])').each(function(i, v) {
                if ($(this).val() != '')
                    pre_select_data.push({ name: v.name, value: $('option:selected', this).text() });
            });
            //console.log(pre_select_data);
            $('#parishioner_edit_form input[type="radio"]:checked').each(function(i, v) {
                if ($(this).val() != '')
                    pre_inputchoose_data.push({ name: v.name, value: $(this).next('span').text() });
            });

            $('#parishioner_edit_form sacrament_received input[type="checkbox"]:checked').each(function(i, v) {
                if ($(this).val() != '')
                    pre_inputchoose_data.push({ name: v.name, value: $(this).next('span').text() });
            });
						
			//console.log($('#parishioner_edit_form parish_section input[type="checkbox"]:checked').val());
			
			 console.log(pre_inputchoose_data),
			
            pre_data = $.merge($.merge(pre_inputdata, pre_select_data), pre_inputchoose_data);
            pre_data = $.merge(pre_data, pre_except_data);
            pre_data = $.merge(pre_data, pre_textdata),
			//pre_data = $.merge(pre_data, pre_checkbox),
                console.log(pre_data);
                $.ajax({
                    headers: {
                        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                    },
                    type: 'POST',
                    url: show_previewURL,
                    data: pre_data,
                    dataType: 'json',
                    success: function(response) {
                        $('#preBody').html(response.pre_body)
                        $("#preAddModal").modal("toggle");
                    }
                });
        }
    });
    $('#modal_button_confirmation').on('click', function(e) {
        e.preventDefault();
        swal({
                title: "Disclaimer",
                text: "No changes would be made after submission of the form",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#009688",
                cancelButtonColor: "#009688",
                confirmButtonText: "Yes, Submit!",
                cancelButtonText: "No, cancel!",
                closeOnConfirm: false,
                animation: "slide-from-top",
                closeOnCancel: true,
                //imageUrl: '<i class="fa fa-info">'
            },
            function(inputValue) {
                if (inputValue) {
                    $('#parishioner_edit_form').off('submit').submit();
                }
            });
        //
    });
});
