$(function() {
    $("#parishioner_form").on("submit", function(e) {
        // console.log("in");
        // return false;
        e.preventDefault(), selform = $(this), show_previewURL = selform.data("prehref"), selform.parsley().isValid() && (pre_except_data = $('#parishioner_form select[multiple="multiple"]').serializeArray(), pre_inputdata = $("#parishioner_form input").serializeArray(),
            pre_textdata = $("#parishioner_form textarea").serializeArray(), pre_select_data = new Array, pre_inputchoose_data = new Array, pre_imgdata = new Array, $('#parishioner_form select:not([multiple="multiple"])').each(function(e, a) {
                "" != $(this).val() && pre_select_data.push({
                    name: a.name,
                    value: $("option:selected", this).text()
                })
            }), $('#parishioner_form input[type="radio"]:checked').each(function(e, a) {
                "" != $(this).val() && pre_inputchoose_data.push({
                    name: a.name,
                    value: $(this).next("span").text()
                })
            }), $('#parishioner_form sacrament_received input[type="checkbox"]:checked').each(function(e, a) {
                "" != $(this).val() && pre_inputchoose_data.push({
                    name: a.name,
                    value: $(this).next("span").text()
                })
            }), console.log(pre_inputchoose_data),pre_data = $.merge($.merge(pre_inputdata, pre_select_data), pre_inputchoose_data), pre_data = $.merge(pre_data, pre_except_data), pre_data = $.merge(pre_data, pre_textdata), console.log(pre_data),
            $.ajax({
                headers: {
                    "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content")
                },
                type: "POST",
                url: show_previewURL,
                data: pre_data,
                dataType: "json",
                success: function(e) {
                    $("#preBody").html(e.pre_body), $("#preAddModal").modal("toggle")
                }
            }))
    }), $("#modal_button_confirmation").on("click", function(e) {
        e.preventDefault();
        swal({
                title: "Disclaimer",
                text: "No changes would be made after submission of the form",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#009688",
                cancelButtonColor: "#009688",
                confirmButtonText: "Yes, Submit!",
                cancelButtonText: "No, cancel!",
                closeOnConfirm: false,
                animation: "slide-from-top",
                closeOnCancel: true,
                //imageUrl: '<i class="fa fa-info">'
            },
            function(inputValue) {
                if (inputValue) {
                    $('#parishioner_form').off('submit').submit();
                }
            });
        /// $("#parishioner_form").off("submit").submit()
    })
});
